<h2>Rectangle Creator</h2>
<p>개수: <input id="count" type="number" value="5"></p>
<p>기둥: <input id="pillar" type="number" value="5"></p>
<button id="create">Create</button>
<button id="cancel">Cancel</button>
<div id="info" style="padding: 10px; font-family: sans-serif;">
  <div>선택된 노드: <span id="selection-count">0</span>개</div>
  <div>총 lot: <span id="lot-count">0</span>개</div>
</div>

<script>

document.getElementById('create').onclick = () => {
  const countTextbox = document.getElementById('count');
  const pillarTextbox = document.getElementById('pillar');

  const count = parseInt(countTextbox.value, 10);
  const pillar = parseInt(pillarTextbox.value, 10);
  
  parent.postMessage({ pluginMessage: { type: 'create-shapes', count, pillar } }, '*')
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

window.onmessage = (event) => {
  const msg = event.data.pluginMessage;
  
  if (msg.type === 'selection-updated') {
    document.getElementById('selection-count').textContent = msg.selectionCount;
    document.getElementById('lot-count').textContent = msg.lotCount;
  }
};

</script>
